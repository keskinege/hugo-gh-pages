name: Prepare Changes
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: 
      - main 
jobs:
  doPr:
    name: Get Runtime Values
    runs-on: ubuntu-latest
    steps: 
      - name: Checkout
        uses: actions/checkout@v3
      - name: Update
        shell: bash
        run: | 
          echo "8" > test.txt
      - name: Create PR for changed Kong Gateway Configuration
        uses: peter-evans/create-pull-request@v5
        with:
          title: Send prepared kong config to pre-deployment check..
          branch: preparing
          delete-branch: true

        
  secondStep:
      needs: doPr
      name: Show
      if: github.event.pull_request.merged == true
      runs-on: ubuntu-latest
      steps: 
        - name: Get variables
          shell: bash
          run: | 
              echo "${GITHUB_HEAD_REF}"
       
