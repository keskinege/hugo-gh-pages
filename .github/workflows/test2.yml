name: Prepare Changes
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
jobs:
  doPr:
    name: Get Runtime Values
    runs-on: ubuntu-latest
    steps: 
      - name: Checkout
        uses: actions/checkout@v3
      - name: Create PR for changed Kong Gateway Configuration
        # The only file that should be changed for this PR is platform/kong/.generated/kong.yaml
        uses: peter-evans/create-pull-request@v5
        with:
          title: Send prepared kong config to pre-deployment check..
          branch: preparing-${{ steps.set_vars.outputs.branch_name }}
          delete-branch: true

        
  secondStep:
      needs: doPr
      name: Show
      runs-on: ubuntu-latest
      steps: 
        - name: Get variables
          shell: bash
          run: | 
              echo "here I am"
